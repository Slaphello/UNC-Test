-- It's not obfuscate lol
local a = game:GetService("UserInputService")
local b = game:GetService("Players")
local c = game:GetService("RunService")
getgenv().DashNoEndLag = true
local d = b.LocalPlayer
local e = false
local f = false
local g = 0
local h = a.TouchEnabled and not a.KeyboardEnabled
local i = a.KeyboardEnabled
local j = {"Freeze", "Slowed", "WallCombo", "Ragdoll", "BeingLaunched", "BeingGrabbed"}
local function k(l)
    if tick() - g < 0.001 then
        return
    end
    g = tick()
    local m = l:FindFirstChild("Communicate")
    if not m then
        return
    end
    m:FireServer({Dash = Enum.KeyCode.W, Key = Enum.KeyCode.Q, Goal = "KeyPress"})
end
local function n(o, p)
    local q = o.MoveDirection
    if q.Magnitude <= 0 then
        return 0
    end
    local r = p.CFrame:VectorToObjectSpace(q)
    return (math.deg(math.atan2(r.Z, r.X)) + 360) % 360
end
local function s(l, t)
    t.Activated:Connect(
        function()
            if not getgenv().DashNoEndLag then
                return
            end
            if e then
                return
            end
            local u = l:FindFirstChildOfClass("Humanoid")
            local p = l:FindFirstChild("HumanoidRootPart")
            if not u or not p then
                return
            end
            local v = n(u, p)
            if v == 0 or v >= 225 and v < 315 then
                k(l)
            end
        end
    )
end
local function w()
    if not i or f then
        return
    end
    f = true
    a.InputBegan:Connect(
        function(x, y)
            if y then
                return
            end
            if x.KeyCode ~= Enum.KeyCode.Q then
                return
            end
            if not getgenv().DashNoEndLag then
                return
            end
            if e then
                return
            end
            if a:IsKeyDown(Enum.KeyCode.A) or a:IsKeyDown(Enum.KeyCode.S) or a:IsKeyDown(Enum.KeyCode.D) then
                return
            end
            local l = d.Character
            if l then
                k(l)
            end
        end
    )
end
local function z()
    if not h then
        return
    end
    task.spawn(
        function()
            local A = d:WaitForChild("PlayerGui", 5)
            if not A then
                return
            end
            local B = A:WaitForChild("TouchGui", 5)
            if not B then
                return
            end
            local C = B:WaitForChild("TouchControlFrame", 5)
            if not C then
                return
            end
            local D = C:WaitForChild("JumpButton", 5)
            if not D then
                return
            end
            local E = D:FindFirstChild("DashButton")
            if E and d.Character then
                s(d.Character, E)
            end
        end
    )
end
c.Heartbeat:Connect(
    function()
        local l = d.Character
        if not l then
            e = false
            return
        end
        for F, G in ipairs(j) do
            if l:FindFirstChild(G) then
                e = true
                return
            end
        end
        e = false
    end
)
pcall(
    function()
        if not getrawmetatable or not newcclosure then
            return
        end
        local H = getrawmetatable(game)
        if not H or not H.__namecall then
            return
        end
        local I = H.__namecall
        setreadonly(H, false)
        H.__namecall =
            newcclosure(
            function(self, ...)
                local J = getnamecallmethod()
                local K = {...}
                if J == "FireServer" and tostring(self) == "Communicate" then
                    local L = K[1]
                    if type(L) == "table" then
                        if
                            L.Key == Enum.KeyCode.Q and (L.Dash == Enum.KeyCode.A or L.Dash == Enum.KeyCode.D) and
                                L.Goal == "KeyPress" and
                                not e
                         then
                            return nil
                        end
                    end
                end
                return I(self, ...)
            end
        )
        setreadonly(H, true)
    end
)
w()
z()
d.CharacterAdded:Connect(
    function()
        task.wait(0.15)
        z()
    end
)
